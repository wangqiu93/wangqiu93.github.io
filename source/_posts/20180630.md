---
title: 并发与多线程
---

# 线程池
## 核心参数

* 核心线程数
* 最大线程数
* 线程空闲时间
* 空闲时间的单位
* 缓存队列
* 拒绝策略

## 线程池任务执行流程

提交任务的方法
submit：可以返回一个 future 对象，通过 future 对象可以了解任务执行情况，可以取消任务的执行，还可获取执行结果或执行异常。
execute：submit 最终也是通过 execute 执行的。
![img](http://s0.lgstatic.com/i/image2/M01/8A/BE/CgoB5l14nI6ABd8rAABJ5DF7U78658.png)
1. 向线程池提交任务时，会首先判断线程池中的线程数是否大于设置的核心线程数，如果不大于，就创建一个核心线程来执行任务。
2. 如果大于核心线程数，就会判断缓冲队列是否满了，如果没有满，则放入队列，等待线程空闲时执行任务。
3. 如果队列已经满了，则判断是否达到了线程池设置的最大线程数，如果没有达到，就创建新线程来执行任务。
4. 如果已经达到了最大线程数，则执行指定的拒绝策略

# 同步与互斥

## synchronized
synchronized 应用在方法上时，在字节码中是通过方法的 ACC_SYNCHRONIZED 标志来实现的；
synchronized 应用在同步块上时，在字节码中是通过 monitorenter 和 monitorexit 实现的。

## Lock

## CAS

# 线程状态转换

# 线程通信

# 死锁

# 机制

## ThreadLocal

## Fork/Join

## Volatile

## Interrupt