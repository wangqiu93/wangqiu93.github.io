---
title: RPC 
category: 应用模块
---

RPC 是远程过程调用的简写，RPC 与 HTTP 一样都可以实现远程服务的调用，但是使用方式上有很大的区别。它能够像使用本地方法一样调用远程的方法。
<!--more-->

## 交互流程

![img](http://s0.lgstatic.com/i/image2/M01/8A/C8/CgoB5l14qRCAD22_AAAwyeZIb9A096.png)

- Client端：请求的发起方，也称 Consumer 或者 Referer。
- Server 端：服务实现提供方，也称 Provider。

为了保持较高的性能，Client 端一般都是直接请求远端的 Server 节点。因此，RPC 框架需要自动的服务注册与发现的能力，上方的绿色的注册中心就是用来动态维护可用服务节点信息的模块。

**当 Server 提供服务时**，向注册中心注册服务信息，告诉注册中心可以提供哪些服务。同时与注册中心保持心跳或者维持长链接，来维持 Server 可用状态，具体方式与注册中心的实现有关。例如 ZK 使用长链接推送方式而 Consul 使用心跳方式。

**当 Client 需要使用服务时**，会先向注册中心订阅服务，获得可用的 Server 节点，并保存在 Client 本地。当 Server 节点发生变更时会通知 Client 更新本地 Server 节点信息。Client 按某种负载均衡策略直接请求 Server 使用服务。

注意：注册中心只参与服务节点的注册与变更通知，并不会参与具体请求的处理。另外一般的 RPC 框架都提供了完整的服务治理能力，因此会有额外的管理模块和信息采集模块来监控、管理服务。



## 开源框架

### Dubbo

- 阿里开源的 RPC 框架，提供完善的服务治理能力。
- 可以快速为 Java 服务提供 RPC 能力。
- 提供了随机、轮询、最少调用优先等多种负载均衡策略。
- 提供对 ZK 等多种注册中心等支持，能够自动完成服务的注册与发现。
- 提供可视化的管理后台，方便对服务状态进行监控和管理。

### Motan

- 微博开源的轻量级服务治理框架，提供强大灵活的扩展能力。
- 提供了多语言支持，目前支持 Java、PHP、Lua、Golang 等多语言交互，目前 Python 和 C++ 的客户端也在研发中。
- 通过 Agent 代理方式，实现了的跨语言 ServiceMesh 的支持。
- Java 版本的通信层也是通过 Netty 来实现的，基于 TCP 的私有协议进行通信。

### gPRC

- Google 开源的框架，本身支持的服务治理能力并不强，但拥有非常灵活的插件扩展能力，可以方便的实现自定义的服务治理能力。
- 默认使用 Protobuf 进行消息序列化，非常适合多语言服务之间进行交互。
- 基于 HTTP2 协议，能够支持链接复用。
- 提供了流式调用能力。
- 支持从服务端进行推送消息的能力。

